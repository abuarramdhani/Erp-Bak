
//INCREMENT FORM
	$('.increment-form').TouchSpin({
      verticalbuttons: true,
      verticalupclass: 'glyphicon glyphicon-plus',
      verticaldownclass: 'glyphicon glyphicon-minus'
    });

$('#dataTables-masterStatusKerja').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
	$('#dataTables-riwayatPotDanaPensiun').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
	$('#dataTables-riwayatUpamk').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
	$('#dataTables-riwayatInsentifKemahalan').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-MasterJabatanUpah').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-masterJabatan').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

	$('#dataTables-masterSeksi').DataTable( {
	  "destroy": true,
	  "scrollX": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
$('#dataTables-kantorAsal').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	$('#dataTables-riwayatGaji').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
$('#dataTables-lokasiKerja').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
$('#dataTables-masterBankInduk').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
$('#dataTables-masterBank').DataTable({
	  "destroy": true,
	  dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
	});
$('#dataTables-masterSekolahAsal').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-setgajiump').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
$('#dataTables-settarifpekerjasakit').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-standartJamTkpw').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
$('#dataTables-standartJamUmum').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-masterParamBpjs').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
$('#dataTables-masterParamPtkp').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-masterParameterTarifPph').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	

$('#dataTables-riwayatPenerimaKonpensasiLembur').DataTable( {
	  "destroy": true,
	  "scrollX": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-masterParamKompJab').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-riwayatRekeningPekerja').DataTable( {
	  "destroy": true,
  dom: 'Bfrtip',
  buttons: [
	'excel'
  ]
});

$('#dataTables-masterParamPengurangPajak').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-transaksiPenggajian').DataTable( {
	  "destroy": true,
  dom: 'Bfrtip',
  "autoWidth": true,
  buttons: [
	'excel'
  ]
});
	
	
$('#dataTables-masterPekerja').DataTable( {
	  "destroy": true,
	  "scrollX": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-riwayatSetAsuransi').DataTable( {
	  "destroy": true,
	  "scrollX": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });	

$('#dataTables-masterParamKompUmum').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-riwayatParamKoperasi').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-transaksiKlaimSisaCuti').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-transaksiHitungThr').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      "scrollX": true,
      buttons: [
        'excel'
      ]
    });

$('#dataTables-transaksiHitungThrImport').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-kompTamb').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#dataTables-transaksiHutang').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-daftarPekerjaSakit').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-dataGajianPersonalia').DataTable( {
	  "destroy": true,
	  "scrollX" : true,
      dom: 'Bfrtip',
      buttons: [
        'excel','pdf'
      ]
    });

$('#dataTables-transaksiKlaimDl').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-hutangKaryawan').DataTable( {
	  "destroy": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-reportMasterGaji').DataTable( {
	  "destroy": true,
	  "scrollX": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });

$('#dataTables-reportDanaPensiun').DataTable( {
    "scrollX": true,
      dom: 'Bfrtip',
      buttons: [
        'excel'
      ]
    });
	
$('#txtTglTransaksi').datepicker({ autoclose: true });
$('#txtTglRecord').datepicker({ autoclose: true });
$('#txtTglRec').datepicker({ autoclose: true });
$('#txtTglLahir').datepicker({ autoclose: true });
$('#txtTglNikah').datepicker({ autoclose: true });
$('#txtDiangkat').datepicker({ autoclose: true });
$('#txtMasukKerja').datepicker({ autoclose: true });
$('#txtAkhKontrak').datepicker({ autoclose: true });
$('#txtTglSpsi').datepicker({ autoclose: true });
$('#txtTglKop').datepicker({ autoclose: true });
$('#txtTglKeluar').datepicker({ autoclose: true });
$('#txtTglJamRecord').datepicker({ autoclose: true });
$('#txtTglRec').datepicker({ autoclose: true });

$(document).ready(function() {
  $('#txtPeriodeHitung').datepicker({
    autoclose: true,
    format: "yyyy-mm",
    viewMode: "months", 
    minViewMode: "months"
  });
  $('#txtTglBerlakuPtkp').datepicker({ 
	autoclose: true,
	format: "yyyy-mm-dd",
 });
 $('#txtPeriodePengurangPajak').datepicker({ 
	autoclose: true,
	format: "yyyy-mm-dd",
 });
 $('#txtTglPengajuan').datepicker({ 
	autoclose: true,
	format: "yyyy-mm-dd",
 });
  $('#txtTanggal').datepicker({ 
	autoclose: true,
	format: "yyyy-mm-dd",
 });
 $('#txtTglBerlaku').datepicker({ 
	autoclose: true,
	format: "yyyy-mm-dd",
 });
  $('#txtPeriodeJst_new').datepicker({ 
	autoclose: true,
	format: "yyyy-mm-dd",
 });
 
   $('#txtPotTambLain').datepicker({ 
	autoclose: true,
	format: "yyyy-mm-dd",
 });
  $('#cmbKdBank').select2();
  $('.select2-txtDept').select2();
  $('#txtKodeStatusKerja').select2();
  $('#cmbKdHubunganKerja').select2();
  $('#cmbKdStatusKerja').select2();
  $('#cmbKdJabatan').select2();
  $('#cmbStat').select2();
  $('#cmbIdLokasiKerja').select2();
  $('.select2-getNoind').select2({
    placeholder: "No Induk",
    allowClear: true,
    minimumInputLength: 2,
    ajax: {   
      url:baseurl+"PayrollManagement/HutangKaryawan/getNoind",
      dataType: 'json',
      type: "GET",
      data: function (params) {
        var queryParameters = {
          term: params.term
        }
        return queryParameters;
      },
      processResults: function (data) {
        return {
          results: $.map(data, function(obj) {
            return { id:obj.noind, text:obj.noind+' - '+obj.nama};
          })
        };
      }
    }
  });
  
  $('.money').mask('000,000,000,000,000', {reverse: true});
});

function getMaxHutang(noind){
  $.ajax({
    type:'POST',
    data:{noind: noind},
    url:baseurl+"PayrollManagement/HutangKaryawan/getMaxHutang",
    success:function(result)
    {
      $('#txtTotalHutang').attr("placeholder",result);
      $('#txtTotalHutang').attr("max",result);
      $('#max-hutang').text("* Max 2x Gaji Pokok ("+result+")");
    },
    error:function()
    {
      $('#txtTotalHutang').attr("placeholder",'Error Occured');
      $('#txtTotalHutang').attr("max",'0');
      $('#max-hutang').text("* Max 2x Gaji Pokok ()");
    }
  });
}

function getKlaimCuti(){
	var noind	= $("#txtNoind option:selected").val();
	var period	= $("#txtPeriodeHitung").val();
	var cuti	    = $("#txtSisaCuti").val();
	if(noind.length > 0 && period.length > 0 && cuti.length > 0){
		 $.ajax({
			type:'POST',
			data:{noind: noind, period:period, cuti:cuti},
			url:baseurl+"PayrollManagement/TransaksiKlaimSisaCuti/getKlaimCuti",
			success:function(result)
			{
			  $('#txtJumlahKlaim').val(result);
			}
		  });
	}
}
$(document).ready(function() {
  // alert('working');
  $('#tblKondite').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/ProsesGaji/Kondite/showList",
          type: "post",
          error: function(){
            //$("#tblKondite").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblKondite_processing").css("display","none");
          }
        }
      });

  $('#tblDataAbsensi').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/ProsesGaji/DataAbsensi/showList",
          type: "post",
          error: function(){
            //$("#tblDataAbsensi").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblDataAbsensi_processing").css("display","none");
          }
        }
      });

  $('#tblDataLKHSeksi').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/ProsesGaji/DataLKHSeksi/showList",
          type: "post",
          error: function(){
            //$("#tblDataLKHSeksi").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblDataLKHSeksi_processing").css("display","none");
          }
        }
      });

  $('#tblTambahan').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/ProsesGaji/Tambahan/showList",
          type: "post",
          error: function(){
            //$("#tblDataLKHSeksi").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblDataLKHSeksi_processing").css("display","none");
          }
        }
      });

  $('#tblPotongan').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/ProsesGaji/Potongan/showList",
          type: "post",
          error: function(){
            //$("#tblDataLKHSeksi").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblDataLKHSeksi_processing").css("display","none");
          }
        }
      });

  $('#tblTargetBenda').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/MasterData/TargetBenda/showList",
          type: "post",
          error: function(){
            //$("#tblDataLKHSeksi").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblDataLKHSeksi_processing").css("display","none");
          }
        }
      });

  $('#tblMasterGaji').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/MasterData/DataGaji/showList",
          type: "post",
          error: function(){
            //$("#tblDataLKHSeksi").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblDataLKHSeksi_processing").css("display","none");
          }
        }
      });

  $('#tblHasilGaji').DataTable( {
        dom: 'Bfrtip',
        buttons: [
          'excel','pdf'
        ],
        fixedColumns:{
            leftColumns: 5
        },
        "processing": true,
        "serverSide": true,
        "scrollX": true,
        responsive: true,
        "ajax":{
          url : baseurl+"PayrollManagementNonStaff/ProsesGaji/HitungGaji/showList",
          type: "post",
          error: function(){
            //$("#tblDataLKHSeksi").append('<tbody class="text-center"><tr><th colspan="6">No data found in the server</th></tr></tbody>');
            //$("#tblDataLKHSeksi_processing").css("display","none");
          }
        }
      });

  $('#btnCheckServer').click(function(){
    $(this).prop('disabled', true);
    $('#server-status').html('<i class="fa fa-spinner fa-2x faa-spin animated" style="color: #3c8dbc"></i>');
    $.ajax({
        url:baseurl+"PayrollManagementNonStaff/ProsesGaji/DataAbsensi/check_server",
        success:function(result)
        {
          if (result == 1) {
            $('#server-status').html('<i class="fa fa-check fa-2x faa-flash animated" style="color: green"></i>');
          }
          else{
            $('#server-status').html('<i class="fa fa-times fa-2x faa-flash animated" style="color: red"></i>');
          }
          $('#btnCheckServer').prop('disabled', false);
        },
        error:function()
        {
          $('#server-status').html('<i class="fa fa-times fa-2x faa-flash animated" style="color: red"></i>');
          $('#btnCheckServer').prop('disabled', false);
        }
      });
  });

  date_picker_non_staff();
  function date_picker_non_staff(){
    $('.date-picker-pr-non-staf').daterangepicker({
      "singleDatePicker": true,
      //"autoApply": true,
      "timePicker": false,
      "timePicker24Hour": false,
      "showDropdowns": false,
      locale: {
          format: 'YYYY-MM-DD'
        },
    });
  }

  date_picker_non_staff_with_time();
  function date_picker_non_staff_with_time(){
    $('.date-picker-pr-non-staf-with-time').daterangepicker({
      "singleDatePicker": true,
      //"autoApply": true,
      "timePicker": true,
      "timePicker24Hour": true,
      "showDropdowns": false,
      locale: {
          format: 'YYYY-MM-DD HH:mm:HH:mm:ss'
        },
    });
  }

  cmbNoind();
  function cmbNoind(){
    $(".cmbNoindHeader").select2({
      minimumInputLength: 3,
      ajax: {   
        url:baseurl+"PayrollManagementNonStaff/getNoind",
        dataType: 'json',
        type: "GET",
        data: function (params) {
          var queryParameters = {
            term: params.term,
          }
          return queryParameters;
        },
        processResults: function (data) {
          return {
            results: $.map(data, function(obj) {
              return { id:obj.NoInduk+' - '+obj.Kodesie, text:obj.NoInduk+' - '+obj.Nama};
            })
          };
        }
      } 
    });
  }

  cmbKodesie();
  function cmbKodesie(){
    $(".cmbKodesie").select2({
      minimumInputLength: 3,
      ajax: {   
        url:baseurl+"PayrollManagementNonStaff/getKodesie",
        dataType: 'json',
        type: "GET",
        data: function (params) {
          var queryParameters = {
            term: params.term,
          }
          return queryParameters;
        },
        processResults: function (data) {
          return {
            results: $.map(data, function(obj) {
              return { id:obj.Kodesie, text:obj.Kodesie+' - '+obj.Seksi};
            })
          };
        }
      } 
    });
  }

  $('#btnCetakForm').click(function(){
    var tgl1 = new Date($('#txtTanggal1').val());
    var tgl2 = new Date($('#txtTanggal2').val());
    var form = '';
    if (tgl1 > tgl2) {
      form += '<tr>'
            +   '<td colspan="8" class="text-center"><h4>End Date Must Be Greater Than Start Date</h4></td>'
            + '</tr>';
    }
    else{
      while(tgl1 <= tgl2){
        var day = ("0" + tgl1.getDate()).slice(-2);
        var month = ("0" + (tgl1.getMonth() + 1)).slice(-2);
        var year = tgl1.getFullYear();
        var full_date = year + '-' + month + '-' + day;
        form += '<tr>'
              +   '<td width="30%" class="text-center">'
              +     full_date
              +     '<input type="hidden" class="form-control" name="txtTanggalHeader[]" value="' + full_date + '" required>'
              +   '</td>'
              +   '<td width="7%"><input type="text" class="form-control text-center" name="txtMKHeader[]" placeholder="MK" required></td>'
              +   '<td width="7%"><input type="text" class="form-control text-center" name="txtBKIHeader[]" placeholder="BKI" required></td>'
              +   '<td width="7%"><input type="text" class="form-control text-center" name="txtBKPHeader[]" placeholder="BKP" required></td>'
              +   '<td width="7%"><input type="text" class="form-control text-center" name="txtTKPHeader[]" placeholder="TKP" required></td>'
              +   '<td width="7%"><input type="text" class="form-control text-center" name="txtKBHeader[]" placeholder="KB" required></td>'
              +   '<td width="7%"><input type="text" class="form-control text-center" name="txtKKHeader[]" placeholder="KK" required></td>'
              +   '<td width="7%"><input type="text" class="form-control text-center" name="txtKSHeader[]" placeholder="KS" required></td>'
              + '</tr>';

        var newDate = tgl1.setDate(tgl1.getDate() + 1);
        tgl1 = new Date(newDate);
      }
    }
    $('#FormWrapper').html(form);
    date_picker_non_staff();
    date_picker_non_staff_with_time();

    $('.approval').change(function(){
      var val = $(this).val();
      if (val == '1') {
        $(this).closest('tr').find('.approval-date').prop('readonly', false);
        $(this).closest('tr').find('.approval-by').prop('readonly', false);
      }
      else{
        $(this).closest('tr').find('.approval-date').prop('readonly', true);
        $(this).closest('tr').find('.approval-by').prop('readonly', true);
      }
    })

    cmbNoind();

  })

  $('#cmbKodesie').change(function(){
    var val = $(this).val();
    $('#cmbKodesie').prop('disabled', true);
    $('#cmbKodesie-loading').html('<i class="fa fa-spinner fa-2x faa-spin animated" style="color: #3c8dbc"></i>');
    $.ajax({
      type:'POST',
      data:{kodesie:val},
      url:baseurl+"PayrollManagementNonStaff/ProsesGaji/Kondite/getPekerja",
      success:function(result)
      {
        $('#FormWrapper').html(result);
        $('#cmbKodesie').prop('disabled', false);
        $('#cmbKodesie-loading').html('');
      },
      error:function()
      {
        var form = '';
        form += '<tr>'
            +   '<td colspan="8" class="text-center"><h4>Something Error, Please try again</h4></td>'
            + '</tr>';
        $('#FormWrapper').html(form);
        $('#cmbKodesie').prop('disabled', false);
        $('#cmbKodesie-loading').html('');
      }
    });
  })

  $('#btnImportDataAbsensi').click(function(){
    var loading_full =  '<div class="pace pace-active">'+
                        ' <div class="pace-progress" style="height:100px;width:80px" data-progress="100">'+
                        '  <div class="pace-progress-inner">'+
                        '  </div>'+
                        ' </div>'+
                        ' <div class="pace-activity">'+
                        ' </div>'+
                        '</div>';

    var file = $('input[name="file"]').val();
    var bulan = $('select[name="slcBulan"]').val();
    var tahun = $('input[name="txtTahun"]').val();

    $('#errorImportData').html('');
    $('#btnImportDataAbsensi').prop('disabled', true);

    if (file == '' || bulan == '' || tahun == '') {
      $('#errorImportData').html('<b style="color: red">Data belum lengkap</b>');
      $('#btnImportDataAbsensi').prop('disabled', false);
    }
    else{
      $('body').addClass('noscroll');
      $('#loadingAjax').addClass('overlay_loading');
      $('#loadingAjax').html(loading_full);

      var formDataAbsensi = new FormData($('#ImportDataAbsensi')[0]);

      //Import Request
      $.ajax({
        type:'POST',
        data:formDataAbsensi,
        url:$('#ImportDataAbsensi').attr('action'),
        success:function(result)
        {
          $('#errorImportData').html('<b style="color: #3c8dbc">Import Data Berhasil</b>');
          $('input[name="file_path"]').val('');
          $('input[name="file"]').val('');
          $('select[name="slcBulan"]').select2('val', null);
          $('input[name="txtTahun"]').val('');
          $('#btnImportDataAbsensi').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        error:function()
        {
          $('#errorImportData').html('<b style="color: red">Terjadi Kesalahan</b>');
          $('#btnImportDataAbsensi').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        contentType: false,
        processData: false
      });
    }
  });

  $('#btnPreClearData').click(function(){
    var loading_full =  '<div class="pace pace-active">'+
                        ' <div class="pace-progress" style="height:100px;width:80px" data-progress="100">'+
                        '  <div class="pace-progress-inner">'+
                        '  </div>'+
                        ' </div>'+
                        ' <div class="pace-activity">'+
                        ' </div>'+
                        '</div>';
    var bulan = $('select[name="slcBulan"]').val();
    var tahun = $('input[name="txtTahun"]').val();

    $('#errorClearData').html('');
    $('#btnPreClearData').prop('disabled', true);
    
    if (bulan == '' || tahun == '') {
      $('#errorClearData').html('<b style="color: red">Data belum lengkap</b>');
      $('#btnPreClearData').prop('disabled', false);
    }
    else{
      $('#btnPreClearData').prop('disabled', false);

      $('#clear-alert').modal();
      $('#btnClearData').click(function(){
        $('#clear-alert').modal('hide');
        $('#btnClearData').prop('disabled', true);

        $('body').addClass('noscroll');
        $('#loadingAjax').addClass('overlay_loading');
        $('#loadingAjax').html(loading_full);

        //Import Request
        $.ajax({
          type:'POST',
          data:$('#clearData').serialize(),
          url:$('#clearData').attr('action'),
          success:function(result)
          {
            $('#errorClearData').html('<b style="color: #3c8dbc">Hapus Data Berhasil</b>');
            $('input[name="file_path"]').val('');
            $('input[name="file"]').val('');
            $('select[name="slcBulan"]').select2('val', null);
            $('input[name="txtTahun"]').val('');
            $('#btnClearData').prop('disabled', false);

            $('body').removeClass('noscroll');
            $('#loadingAjax').html('');
            $('#loadingAjax').removeClass('overlay_loading');
          },
          error:function()
          {
            $('#errorClearData').html('<b style="color: red">Terjadi Kesalahan</b>');
            $('#btnClearData').prop('disabled', false);

            $('body').removeClass('noscroll');
            $('#loadingAjax').html('');
            $('#loadingAjax').removeClass('overlay_loading');
          }
        });
      });
    }
  });

  $('#btnImportDataLKH').click(function(){
    var loading_full =  '<div class="pace pace-active">'+
                        ' <div class="pace-progress" style="height:100px;width:80px" data-progress="100">'+
                        '  <div class="pace-progress-inner">'+
                        '  </div>'+
                        ' </div>'+
                        ' <div class="pace-activity">'+
                        ' </div>'+
                        '</div>';

    var file = $('input[name="file"]').val();
    var bulan = $('select[name="slcBulan"]').val();
    var tahun = $('input[name="txtTahun"]').val();

    $('#errorImportData').html('');
    $('#btnImportDataLKH').prop('disabled', true);

    if (file == '' || bulan == '' || tahun == '') {
      $('#errorImportData').html('<b style="color: red">Data belum lengkap</b>');
      $('#btnImportDataLKH').prop('disabled', false);
    }
    else{
      $('body').addClass('noscroll');
      $('#loadingAjax').addClass('overlay_loading');
      $('#loadingAjax').html(loading_full);


      var formDataLKH = new FormData($('#ImportDataLKH')[0]);

      //Import Request
      $.ajax({
        type:'POST',
        data:formDataLKH,
        url:$('#ImportDataLKH').attr('action'),
        success:function(result)
        {
          $('#errorImportData').html('<b style="color: #3c8dbc">Import Data Berhasil</b>');
          $('input[name="file_path"]').val('');
          $('input[name="file"]').val('');
          $('select[name="slcBulan"]').select2('val', null);
          $('input[name="txtTahun"]').val('');
          $('#btnImportDataLKH').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        error:function()
        {
          $('#errorImportData').html('<b style="color: red">Terjadi Kesalahan</b>');
          $('#btnImportDataLKH').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        contentType: false,
        processData: false
      });
    }
  });

  hitungGajiTable();
  function hitungGajiTable() {
    $('#tblHitungGaji').DataTable( {
          dom: 'Bfrtip',
          buttons: [
            'excel'
          ],
          "scrollX": true,
          "paging": false
          //scrollCollapse: true,
        });
  }

  $('#btnProsesGaji').click(function(){
    var loading_full =  '<div class="pace pace-active">'+
                        ' <div class="pace-progress" style="height:100px;width:80px" data-progress="100">'+
                        '  <div class="pace-progress-inner">'+
                        '  </div>'+
                        ' </div>'+
                        ' <div class="pace-activity">'+
                        ' </div>'+
                        '</div>';

    var seksi = $('select[name="cmbKodesie"]').val();
    var bulan = $('select[name="cmbBulan"]').val();
    var tahun = $('input[name="txtTahun"]').val();

    $('#errorProsesGaji').html('');
    $('#btnProsesGaji').prop('disabled', true);
    $('#btnPrintStrukAll').prop('disabled', true);

    if (seksi == '' || bulan == '' || tahun == '') {
      $('#errorProsesGaji').html('<b style="color: red">Data belum lengkap</b>');
      $('#btnProsesGaji').prop('disabled', false);
    }
    else{
      $('body').addClass('noscroll');
      $('#loadingAjax').addClass('overlay_loading');
      $('#loadingAjax').html(loading_full);

      //Hitung Request
      $.ajax({
        type:'POST',
        data:$('#ProsesGajiForm').serialize(),
        url:$('#ProsesGajiForm').attr('action'),
        success:function(result)
        {
          $('#errorProsesGaji').html('<b style="color: #3c8dbc">Hitung Gaji Berhasil</b>');
          $('#tblHitungGaji').DataTable().destroy();
          $('#prosesGaji').html(result);
          hitungGajiTable();
          //hitungGajiTable.destroy();
          // $('select[name="cmbKodesie"]').select2('val', null);
          // $('select[name="cmbBulan"]').select2('val', null);
          // $('input[name="txtTahun"]').val('');
          $('#btnProsesGaji').prop('disabled', false);
          if (result != '') {
            $('#btnPrintStrukAll').prop('disabled', false);
          }

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        error:function()
        {
          $('#errorProsesGaji').html('<b style="color: red">Terjadi Kesalahan</b>');
          $('#btnProsesGaji').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        }
      });
    }
  });


  $('#btnImportDataTarget').click(function(){
    var loading_full =  '<div class="pace pace-active">'+
                        ' <div class="pace-progress" style="height:100px;width:80px" data-progress="100">'+
                        '  <div class="pace-progress-inner">'+
                        '  </div>'+
                        ' </div>'+
                        ' <div class="pace-activity">'+
                        ' </div>'+
                        '</div>';

    var file = $('input[name="file"]').val();

    $('#errorImportData').html('');
    $('#btnImportDataTarget').prop('disabled', true);

    if (file == '') {
      $('#errorImportData').html('<b style="color: red">Data belum lengkap</b>');
      $('#btnImportDataTarget').prop('disabled', false);
    }
    else{
      $('body').addClass('noscroll');
      $('#loadingAjax').addClass('overlay_loading');
      $('#loadingAjax').html(loading_full);


      var formDataLKH = new FormData($('#ImportDataTarget')[0]);

      //Import Request
      $.ajax({
        type:'POST',
        data:formDataLKH,
        url:$('#ImportDataTarget').attr('action'),
        success:function(result)
        {
          $('#errorImportData').html('<b style="color: #3c8dbc">Import Data Berhasil</b>');
          $('input[name="file_path"]').val('');
          $('input[name="file"]').val('');
          $('#btnImportDataTarget').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        error:function()
        {
          $('#errorImportData').html('<b style="color: red">Terjadi Kesalahan</b>');
          $('#btnImportDataTarget').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        contentType: false,
        processData: false
      });
    }
  });

  $('#btnImportDataGaji').click(function(){
    var loading_full =  '<div class="pace pace-active">'+
                        ' <div class="pace-progress" style="height:100px;width:80px" data-progress="100">'+
                        '  <div class="pace-progress-inner">'+
                        '  </div>'+
                        ' </div>'+
                        ' <div class="pace-activity">'+
                        ' </div>'+
                        '</div>';

    var file = $('input[name="file"]').val();

    $('#errorImportData').html('');
    $('#btnImportDataGaji').prop('disabled', true);

    if (file == '') {
      $('#errorImportData').html('<b style="color: red">Data belum lengkap</b>');
      $('#btnImportDataGaji').prop('disabled', false);
    }
    else{
      $('body').addClass('noscroll');
      $('#loadingAjax').addClass('overlay_loading');
      $('#loadingAjax').html(loading_full);


      var formDataLKH = new FormData($('#ImportDataGaji')[0]);

      //Import Request
      $.ajax({
        type:'POST',
        data:formDataLKH,
        url:$('#ImportDataGaji').attr('action'),
        success:function(result)
        {
          $('#errorImportData').html('<b style="color: #3c8dbc">Import Data Berhasil</b>');
          $('input[name="file_path"]').val('');
          $('input[name="file"]').val('');
          $('#btnImportDataGaji').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        error:function()
        {
          $('#errorImportData').html('<b style="color: red">Terjadi Kesalahan</b>');
          $('#btnImportDataGaji').prop('disabled', false);

          $('body').removeClass('noscroll');
          $('#loadingAjax').html('');
          $('#loadingAjax').removeClass('overlay_loading');
        },
        contentType: false,
        processData: false
      });
    }
  });

});
